#!/usr/bin/env ruby

$LOAD_PATH << 'lib'
require 'tic_tac_toe/game'
require 'tic_tac_toe/human'
require 'tic_tac_toe/computer'
require 'tic_tac_toe/display/cli'

puts "#" * 50
puts "Player 1 Human (1) or CPU (2)?"
puts "#" * 50
choice = gets.chomp

if choice == "1"
  player_1 = Human.new(name: "Player 1")
  puts "#" * 50
  puts "Player 1 is human"
  puts "#" * 50
else
  player_1= Computer.new(name: "Player 1")
  puts "#" * 50
  puts "Player 1 is Computer"
  puts "#" * 50
end

puts "#" * 50
puts "Player 2 Human (1) or Computer (2)?"
choice = gets.chomp
puts "#" * 50

if choice == "1"
  player_2 = Human.new(name: "Player 2")
  puts "Player 2 is human"
else
  player_2 = Computer.new(name: "Player 2")
  puts "Player 2 is Computer"
end

puts "#" * 50
puts "Choose mark for Player 1. X (1) or O (2)?" if player_1.is_a?(Human)
puts "#" * 50

choice = player_1.choose_mark(opponent: player_2)

if choice == "1"
  player_1.mark = "X"
else
  player_1.mark = "O"
end

player_1.mark
puts "#" * 50
puts "Player 1 will play with #{player_1.mark}"
puts "#" * 50
player_2.mark = player_2.choose_mark(opponent: player_1)
puts "Player 2 will play with #{player_2.mark}"
puts "#" * 50

puts "#" * 50
puts "Who will make the first move?"
puts "1. Player 1 (#{player_1.class.name})"
puts "2. Player 2 (#{player_2.class.name})"
puts "#" * 50
choice = gets.chomp

if choice == "1"
  first_player = player_1
else
  first_player = player_2
end

game = Game.new(player_1: player_1,
                player_2: player_2,
                display: Display::Cli.new,
                current_player: first_player)

puts "#" * 50
puts "#{first_player.name} will play first."
puts "#" * 50

game.start
